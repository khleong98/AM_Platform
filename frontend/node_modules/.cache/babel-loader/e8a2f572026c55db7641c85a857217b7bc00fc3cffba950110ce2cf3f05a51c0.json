{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-49f6f9a2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"emailDropdown\"\n}, \"Select Email:\", -1 /* HOISTED */));\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Referral Tree:\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _withDirectives(_createElementVNode(\"select\", {\n    id: \"emailDropdown\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.selectedEmail = $event),\n    onChange: $setup.fetchReferralTree\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.emails, email => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: email,\n      value: email\n    }, _toDisplayString(email), 9 /* TEXT, PROPS */, _hoisted_2);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.selectedEmail]]), $setup.referralTree ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"pre\", null, _toDisplayString($setup.formatReferralTree($setup.referralTree)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["_createElementVNode","for","key","_createElementBlock","_hoisted_1","id","_cache","$event","$setup","selectedEmail","onChange","fetchReferralTree","_Fragment","_renderList","emails","email","value","_hoisted_2","referralTree","_hoisted_3","_hoisted_4","_toDisplayString","formatReferralTree","_createCommentVNode"],"sources":["C:\\Users\\khleong\\AM_Platform\\frontend\\src\\views\\userReferral.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <label for=\"emailDropdown\">Select Email:</label>\r\n    <select id=\"emailDropdown\" v-model=\"selectedEmail\" @change=\"fetchReferralTree\">\r\n      <option v-for=\"email in emails\" :key=\"email\" :value=\"email\">{{ email }}</option>\r\n    </select>\r\n\r\n    <div v-if=\"referralTree\">\r\n      <h3>Referral Tree:</h3>\r\n      <pre>{{ formatReferralTree(referralTree) }}</pre>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\n\r\nconst emails = ref([]);\r\nconst selectedEmail = ref('');\r\nconst referralTree = ref(null);\r\n\r\nconst fetchEmails = async () => {\r\n  try {\r\n    const response = await axios.get('http://127.0.0.1:5000/email');\r\n    emails.value = response.data.email;\r\n  } catch (error) {\r\n    console.error('Error fetching emails:', error);\r\n  }\r\n};\r\n\r\nconst fetchReferralTree = async () => {\r\n  if (!selectedEmail.value) return;\r\n\r\n  try {\r\n    const response = await axios.get('http://127.0.0.1:5000/referral', {\r\n      params: { email: selectedEmail.value },\r\n    });\r\n    referralTree.value = response.data.referral;\r\n  } catch (error) {\r\n    console.error('Error fetching referral tree:', error);\r\n  }\r\n};\r\n\r\nconst formatReferralTree = (tree, level = 0) => {\r\n  let formattedTree = '';\r\n  for (const [email, subTree] of Object.entries(tree)) {\r\n    formattedTree += `${'>>>> '.repeat(level)}${email}\\n`;\r\n    for (const subTreeItem of subTree) {\r\n      formattedTree += formatReferralTree(subTreeItem, level + 1);\r\n    }\r\n  }\r\n  return formattedTree;\r\n};\r\n\r\nonMounted(() => {\r\n  fetchEmails();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\npre {\r\n  white-space: pre-wrap;\r\n  font-family: monospace;\r\n}\r\n</style>\r\n"],"mappings":";;gEAEIA,mBAAA,CAAgD;EAAzCC,GAAG,EAAC;AAAe,GAAC,eAAa;mBAF5C;;EAAAC,GAAA;AAAA;gEAQMF,mBAAA,CAAuB,YAAnB,gBAAc;;uBAPtBG,mBAAA,CAUM,cATJC,UAAgD,E,gBAChDJ,mBAAA,CAES;IAFDK,EAAE,EAAC,eAAe;IAH9B,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAGwCC,MAAA,CAAAC,aAAa,GAAAF,MAAA;IAAGG,QAAM,EAAEF,MAAA,CAAAG;yBAC1DR,mBAAA,CAAgFS,SAAA,QAJtFC,WAAA,CAI8BL,MAAA,CAAAM,MAAM,EAAfC,KAAK;yBAApBZ,mBAAA,CAAgF;MAA/CD,GAAG,EAAEa,KAAK;MAAGC,KAAK,EAAED;wBAAUA,KAAK,wBAJ1EE,UAAA;2FAGwCT,MAAA,CAAAC,aAAa,E,GAItCD,MAAA,CAAAU,YAAY,I,cAAvBf,mBAAA,CAGM,OAVVgB,UAAA,GAQMC,UAAuB,EACvBpB,mBAAA,CAAiD,aAAAqB,gBAAA,CAAzCb,MAAA,CAAAc,kBAAkB,CAACd,MAAA,CAAAU,YAAY,kB,KAT7CK,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}